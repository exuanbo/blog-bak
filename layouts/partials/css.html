{{ if or .Params.math .Site.Params.math }}
  {{ $main := resources.Get "scss/main.scss" }}
  {{ $katex := resources.Get "scss/katex.scss" }}
  {{ $style := slice $main $katex | resources.Concat "scss/style.scss" | resources.ExecuteAsTemplate "css/style.css" . | toCSS | minify | fingerprint -}}
  <link rel="stylesheet" href="{{ $style.RelPermalink }}" {{ printf "integrity=%q" $style.Data.Integrity | safeHTMLAttr }}>
  <script defer src="/js/katex/katex.min.js"></script>
  <script defer src="/js/katex/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
{{ else }}
  {{ $style := resources.Get "scss/main.scss" | resources.ExecuteAsTemplate "css/style.css" . | toCSS | minify | fingerprint -}}
  <link rel="stylesheet" href="{{ $style.RelPermalink }}" {{ printf "integrity=%q" $style.Data.Integrity | safeHTMLAttr }}>
{{ end }}